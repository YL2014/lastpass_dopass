LPMessaging=function(p){var q=0,h={},r=0,j=function(a){var b={},c=!1,d;for(d in a)if(a.hasOwnProperty(d)){var e=a[d];switch(typeof e){case "function":c=c||!0;b[d]=!0;break;case "object":b[d]=j(e),c=c||null!==b[d]}}return c?b:null},k=function(a){var b={},c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];switch(typeof d){case "function":b[c]=d;delete a[c];break;case "object":b[c]=k(d)}}return b},l=function(a){for(var b in a)if(a.hasOwnProperty(b)){var c=a[b];"object"===typeof c&&"[object Object]"===Object.prototype.toString.call(c)&&
null!==Object.getPrototypeOf(Object.getPrototypeOf(c))?a[b]=void 0:"object"===typeof c&&l(c)}},m=function(a){l(a.args);var b=j(a.args);if(b){var c=++r;h[c]=k(a.args);a.requestID=c;a.functions=b}},s=function(a,b,c){return function(d){for(var e={responseRequestID:b.requestID,callbackPath:c},f=[],g=0,h=arguments.length;g<h;++g)f.push(arguments[g]);e.args=f;m(e);a(e)}},n=function(a,b,c,d,e){e=e||[];for(var f in c){var g=c[f];switch(typeof g){case "object":n(a,b[f],g,d,e.concat(f));break;default:b[f]=
s(a,d,e.concat(f))}}};return{handleRequest:function(a,b,c,d){var e=b.args;n(c,e,b.functions,b);LPReflection.callFunction(a,b.cmd,e,d)},makeRequest:function(a,b){m(b.data);return a(b)},handleResponse:function(a){var b=h[a.responseRequestID];delete h[a.responseRequestID];for(var c=0,d=a.callbackPath.length;c<d;++c)b=b[a.callbackPath[c]];b.apply(p,a.args)},getNewMessageSourceID:function(){return++q}}}(this);
